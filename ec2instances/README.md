# CSV  
## instances.csv  

| 項目名                  | 説明                                                                 | 必須？（`add`時） | 必須？（`remove`時） | 注意事項/形式                                                                                                |
| :---------------------- | :------------------------------------------------------------------- | :---------------- | :----------------- | :----------------------------------------------------------------------------------------------------------- |
| `ACTION`                | 実行するアクション (`add` または `remove`)                             | はい              | はい               | `add`: インスタンスを作成<br>`remove`: 指定されたインスタンスを削除                                            |
| `REGION`                | 対象のAWSリージョン                                                  | 推奨              | 推奨               | 空の場合はスクリプトのデフォルト設定 (`ap-northeast-1`) または環境変数 `AWS_REGION` が使用されます。        |
| `NAME`                  | インスタンスに付ける論理的な名前（`Name` タグとして使用されます）      | はい              | はい               | 削除時はこの名前でインスタンスを検索します。<br>作成時はこの名前のインスタンスが既存かチェックされます。        |
| `IMAGEID`               | 使用するAmazon Machine Image (AMI) のID                              | はい              | いいえ             | `remove` 時は無視されます。                                                                                    |
| `INSTANCETYPE`          | インスタンスタイプ (例: `t3.micro`)                                  | はい              | いいえ             | `remove` 時は無視されます。                                                                                    |
| `KEYNAME`               | 関連付けるEC2キーペアの名前                                          | はい              | いいえ             | 指定された名前のキーペアがリージョンに存在しない場合、スクリプトが新しく作成します（ローカルに秘密鍵も保存）。<br>`remove` 時は無視されます。 |
| `SUBNETNAME`            | インスタンスを配置するサブネットのID (`subnet-xxxx`) または `Name` タグ | はい              | いいえ             | 指定された名前のサブネットのIDを検索します。<br>`remove` 時は無視されます。                                      |
| `SECURITYGROUPNAMES`    | 関連付けるセキュリティグループのID (`sg-xxxx`) または `Name` タグ。複数指定する場合はセミコロン (`;`) で区切ります。 | いいえ            | いいえ             | 空の場合は、そのVPCのデフォルトセキュリティグループが適用されるか、設定によっては作成に失敗する可能性があります。<br>`remove` 時は無視されます。<br>形式: `sg-xxxx;sg-yyyy` または `sg-name-1;sg-name-2` |
| `PRIVATEIPADDRESS`      | インスタンスに割り当てるプライベートIPアドレス                         | いいえ            | いいえ             | 空の場合は自動的に割り当てられます。<br>`remove` 時は無視されます。                                            |
| `DISABLEAPITERMINATION` | API経由でのインスタンス終了を防止するかどうか (`TRUE` またはそれ以外)    | はい              | いいえ             | `TRUE` の場合、終了保護が有効になります。<br>`remove` 時は、処理開始時に終了保護を無効化しようとします。       |
| `TAGS`                  | 追加で設定するリソースタグのリスト。セミコロン (`;`) で区切られた `Key=Value` 形式。 | いいえ            | いいえ             | インスタンス本体、ルートボリューム、Elastic IP（割り当てる場合）に適用されます。<br>`Name` タグはスクリプトが自動で設定します。<br>形式: `Key1=Value1;Key2=Value2` |
| `VOLUMESIZE`            | ルートEBSボリュームのサイズ (GB)                                       | はい              | いいえ             | `remove` 時は無視されます。                                                                                    |
| `VOLUMETYPE`            | ルートEBSボリュームのタイプ (例: `gp2`, `gp3`, `io1`)                    | はい              | いいえ             | `remove` 時は無視されます。                                                                                    |
| `ALLOCATEELASTICIP`     | Elastic IPを新規に割り当て、インスタンスに関連付けるかどうか (`TRUE` またはそれ以外) | いいえ            | いいえ             | `TRUE` の場合、EIPを割り当てて関連付けます。<br>`remove` 時は、関連付けられているEIPを解除して解放しようとします。 |
| `ADDITIONALVOLUMESIZES` | 追加でアタッチするEBSボリュームのサイズ (GB) リスト。セミコロン (`;`) 区切り。 | いいえ            | いいえ             | `remove` 時は無視されます。<br>ルートボリューム以外のボリュームにのみ適用されます。<br>形式: `Size1;Size2;Size3` |
| `ADDITIONALVOLUMETYPES` | 追加ボリュームのタイプリスト (`gp2`, `gp3` など)。セミコロン (`;`) 区切り。`ADDITIONALVOLUMESIZES` と同じ数だけ指定します。 | いいえ            | いいえ             | `remove` 時は無視されます。<br>形式: `Type1;Type2;Type3`                                                      |
| `IAMINSTANCEPROFILE`    | 関連付けるIAMインスタンスプロファイルの名前                              | いいえ            | いいえ             | `remove` 時は無視されます。                                                                                    |
| `OSTYPE`                | OSのタイプ (`linux` または `windows`)                                  | いいえ            | いいえ             | ボリュームのアタッチ時のデバイス名の命名規則 (`/dev/xvda` vs `/dev/sda1` など) に影響します。<br>空の場合は `linux` とみなされます。<br>`remove` 時は無視されます。 |
| `CLOUDWATCHMONITORING`  | CloudWatch詳細モニタリングを有効にするかどうか (`TRUE` またはそれ以外)   | いいえ            | いいえ             | `TRUE` の場合、詳細モニタリングが有効になります。<br>`remove` 時は無視されます。                               |
| `PURCHASEOPTION`        | 購入オプション (`spot` またはそれ以外)                                 | いいえ            | いいえ             | `spot` の場合、スポットインスタンスとしてリクエストされます。<br>空またはそれ以外はオンデマンドインスタンスとなります。<br>`remove` 時は無視されます。 |
| `USERDATA`              | ユーザーデータスクリプトファイルのパス                                   | いいえ            | いいえ             | スクリプト実行時のカレントディレクトリからの相対パス、または絶対パスを指定します。<br>`remove` 時は無視されます。 |

**補足事項:**

* 各行の項目数は、ヘッダー行を含めてすべて同じである必要があります。
* 空の項目は、対応するAWS CLIオプションが省略されるか、スクリプト内のデフォルト値が使用されます（項目の説明を参照）。
* `remove` アクションの場合、`NAME` と `REGION` 以外の項目は基本的にインスタンス識別のために使用されず、削除関連の処理には影響しません（ただし、EIPや追加ボリュームの削除はスクリプトが自動で行います）。
