# CSVファイル 

## targetgroup.csv  
| ヘッダー名                  | 説明                                                                                                                                                                                          | 必須       |
| :------------------------ | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------- |
| `REGION`                    | AWSリージョン                                                                                                                                                                               | Yes      |
| `VPC_ID`                    | VPCのIDまたは名前。ターゲットタイプが`instance`、`ip`、`alb`の場合は必須。Lambdaターゲットグループの場合は空欄。                                                                                              | Yes (条件付き) |
| `TARGET_GROUP_NAME`         | 作成するターゲットグループの名前                                                                                                                                                                  | Yes      |
| `TARGET_GROUP_PROTOCOL`     | ターゲットグループがリスナーにトラフィックをルーティングする際に使用するプロトコル (`HTTP`、`HTTPS`、`TCP`、`TLS`、`UDP`)。ターゲットタイプが`instance`または`ip`の場合に必須。                                                              | Yes (条件付き) |
| `TARGET_GROUP_PORT`         | ターゲットグループがトラフィックをリッスンするポート。ターゲットタイプが`instance`または`ip`の場合に必須。                                                                                                   | Yes (条件付き) |
| `HEALTH_CHECK_PATH`         | ヘルスチェックのリクエストパス。Lambdaターゲットグループの場合は必須。                                                                                                                               | Yes (条件付き) |
| `HEALTH_CHECK_PORT`         | ヘルスチェックのポート。指定がない場合はターゲットグループのポートが使用されます。                                                                                                                            | No       |
| `HEALTH_CHECK_PROTOCOL`     | ヘルスチェックに使用するプロトコル (`HTTP`、`HTTPS`、`TCP`)。デフォルトはターゲットグループのプロトコル。                                                                                                             | No       |
| `HEALTH_CHECK_INTERVAL`     | ヘルスチェックの間隔（秒）。デフォルトは30秒。                                                                                                                                                  | No       |
| `HEALTH_CHECK_TIMEOUT`      | ヘルスチェックのタイムアウト時間（秒）。デフォルトは5秒。                                                                                                                                                   | No       |
| `HEALTHY_THRESHOLD_COUNT`   | ターゲットが正常と見なされるために連続して成功する必要があるヘルスチェックの回数。デフォルトは3回。                                                                                                                      | No       |
| `UNHEALTHY_THRESHOLD_COUNT` | ターゲットが異常と見なされるために連続して失敗する必要があるヘルスチェックの回数。デフォルトは2回。                                                                                                                      | No       |
| `TARGET_TYPE`               | ターゲットのタイプ (`instance`、`ip`、`lambda`、`alb`)                                                                                                                                           | Yes      |
| `TARGETS`                   | ターゲットのリスト。ターゲットタイプによって形式が異なります。                                                                                                                                         | No       |
| `TARGET_PORT`               | ターゲットのポート。ターゲットタイプが`instance`または`ip`の場合に、ターゲットグループのポートと異なるポートを指定する場合に使用します。                                                                                              | No       |
| `TAGS`                      | ターゲットグループに付与するタグ。`Key=Value`形式でセミコロン`;`区切りで複数指定できます (`Env=Prod;Team=Web`)。                                                                                              | No       |


## loadbalancers.csv  
| ヘッダー名                        | 説明                                                                                                                                                                                                                                                           | 必須       |
| :------------------------------ | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------- |
| `REGION`                        | AWSリージョン                                                                                                                                                                                                                                                  | Yes      |
| `TYPE`                          | ロードバランサーのタイプ (`ALB` または `NLB`)                                                                                                                                                                                                                      | Yes      |
| `NAME`                          | 作成するロードバランサーの名前                                                                                                                                                                                                                                        | Yes      |
| `VPC`                           | ロードバランサーを作成するVPCのIDまたは名前                                                                                                                                                                                                                         | Yes      |
| `SUBNETS`                       | ロードバランサーを配置するサブネットのIDリスト。セミコロン`;`区切りで複数指定できます。ALBの場合は少なくとも2つのアベイラビリティゾーンで指定する必要があります。                                                                                                  | Yes      |
| `SECURITY_GROUPS`               | ロードバランサーに適用するセキュリティグループのIDリスト。セミコロン`;`区切りで複数指定できます。                                                                                                                                                                         | Yes      |
| `SCHEME`                        | ロードバランサーのスキーム (`internet-facing` または `internal`)                                                                                                                                                                                                 | Yes      |
| `IP_TYPE`                       | ロードバランサーのIPアドレスタイプ (`ipv4` または `dualstack`)。デフォルトは `ipv4` です。                                                                                                                                                                            | No       |
| `TAGS`                          | ロードバランサーに付与するタグ。`Key=Value`形式でセミコロン`;`区切りで複数指定できます (`Environment=Prod;Owner=TeamA`)。                                                                                                                                              | No       |
| `ENABLE_ACCESS_LOGS`            | アクセスログを有効にするかどうか (`TRUE` または `FALSE`)                                                                                                                                                                                                            | No       |
| `S3_BUCKET_NAME_ACCESS_LOGS`    | アクセスログを保存するS3バケットの名前 (`ENABLE_ACCESS_LOGS` が `TRUE` の場合に必須)                                                                                                                                                                                 | No (条件付き) |
| `S3_PREFIX_ACCESS_LOGS`         | アクセスログのS3プレフィックス (オプション)                                                                                                                                                                                                                         | No       |
| `DELETE_PROTECTION`             | ロードバランサーの削除保護を有効にするかどうか (`TRUE` または `FALSE`)。デフォルトは `FALSE` です。                                                                                                                                                                     | No       |
| `IDLE_TIMEOUT`                  | ALBのアイドル接続タイムアウト時間（秒）。デフォルトは60秒。NLBには適用されません。                                                                                                                                                                                     | No       |
| `ENABLE_CONNECTION_LOGS`        | NLBの接続ログを有効にするかどうか (`TRUE` または `FALSE`)。ALBには適用されません。                                                                                                                                                                                   | No       |
| `S3_BUCKET_NAME_CONNECTION_LOGS` | NLBの接続ログを保存するS3バケットの名前 (`ENABLE_CONNECTION_LOGS` が `TRUE` の場合に必須)。ALBには適用されません。                                                                                                                                                      | No (条件付き) |
| `S3_PREFIX_CONNECTION_LOGS`     | NLBの接続ログのS3プレフィックス (オプション)。ALBには適用されません。                                                                                                                                                                                               | No       |
| `WAF_FAIL_OPEN`                 | ALBのAWS WAFとの統合時の動作 (`TRUE` または `FALSE`)。`TRUE` の場合、WAFが利用できない場合はリクエストを許可します。デフォルトは `FALSE` です。NLBには適用されません。                                                                                              | No       |
| `CLIENT_KEEP_ALIVE`             | ALBのクライアント側のキープアライブ接続を有効にするかどうか (`TRUE` または `FALSE`)。デフォルトは `TRUE` です。NLBには適用されません。                                                                                                                             | No       |
| `DESYNC_MITIGATION`             | ALBのHTTP Desync Mitigationモード (`defensive`、`strictest`、`monitor`)。デフォルトは `defensive` です。NLBには適用されません。                                                                                                                                       | No       |
| `X_FORWARDED_FOR`               | ALBの `X-Forwarded-For` ヘッダーへのクライアントIPアドレスの追加 (`append`、`preserve`、`remove`)。デフォルトは `append` です。NLBには適用されません。                                                                                                                | No       |
| `CLIENT_PORT_PRESERVATION`      | NLBのクライアントポートの保持を有効にするかどうか (`TRUE` または `FALSE`)。ALBには適用されません。                                                                                                                                                                   | No       |
| `HOST_HEADER_PRESERVATION`      | NLBのホストヘッダーの保持を有効にするかどうか (`TRUE` または `FALSE`)。ALBには適用されません。                                                                                                                                                                     | No       |
| `ARC_ZONE_SHIFT`                | ALBのAvailability Zone Shiftを有効にするかどうか (`TRUE` または `FALSE`)。デフォルトは `FALSE` です。NLBには適用されません。                                                                                                                                       | No       |
| `ROUTING_POLICY`                | **NLBのクロスゾーン負荷分散の設定** (`any_availability_zone`、`partial_availability_zone_affinity`、`availability_zone_affinity`)。デフォルトは `any_availability_zone` です。ALBには適用されません。                                                               | No       |
| `TARGET_SELECTION`              | NLBのターゲット選択 (`TRUE` (all) または `FALSE` (availability_zone))。デフォルトは `availability_zone` です。ALBには適用されません。                                 

## listner.csv  
| ヘッダー名             | 説明                                                                                                                                                                                                                            | 必須        |
| :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :-------- |
| `REGION`               | AWSリージョン。リスナーを作成/更新するリージョンを指定します (例: `ap-northeast-1`)。                                                                                                                                       | Yes       |
| `LOADBALANCERARN`      | 対象となるロードバランサーの名前またはARNを指定します (例: `secure-alb` または `arn:aws:elasticloadbalancing:ap-northeast-1:123456789012:loadbalancer/app/my-alb/abcdef1234567890`)。                                                | Yes       |
| `LISTENERPORT`         | 作成/更新するリスナーのポート番号 (例: `80`, `443`, `8080`)。                                                                                                                                                                   | Yes       |
| `PROTOCOL`             | リスナーのプロトコル (`HTTP`, `HTTPS`, `TCP`, `TLS`)。                                                                                                                                                                        | Yes       |
| `LOADBALANCERTYPE`     | 対象となるロードバランサーのタイプ (`ALB` または `NLB`)。スクリプトの動作制御に使用されます。                                                                                                                                      | Yes       |
| `TARGETGROUPNAMEORARN` | デフォルトアクションが `forward` の場合にトラフィックを転送する単一のターゲットグループの名前またはARN。`FORWARDTARGETGROUPS` が指定されていない場合に必須。                                                                        | Yes (条件付き) |
| `CERTIFICATEARN`       | プロトコルが `HTTPS` または `TLS` の場合のAWS Certificate Manager (ACM) 証明書ARN。ACMまたはIAMにインポートされた証明書を指定します。                                                                                             | Yes (HTTPS/TLSリスナーの場合) |
| `SSLPOLICY`            | プロトコルが `HTTPS` または `TLS` の場合のSSL/TLSセキュリティポリシー名 (例: `ELBSecurityPolicy-2016-08`)。                                                                                                                   | No        |
| `ACTION`               | デフォルトアクションのタイプ (`forward`, `redirect`, `fixed-response`)。                                                                                                                                                        | Yes       |
| `FORWARDTARGETGROUPS`  | デフォルトアクションが `forward` で、複数のターゲットグループに重み付けルーティングする場合、または `TARGETGROUPNAMEORARN` よりも優先して単一のターゲットグループを指定する場合に使用します。ターゲットグループの名前またはARNをカンマ区切りで指定します (例: `tg-web-1,tg-web-2`)。 | No        |
| `REDIRECTURL`          | アクションが `redirect` の場合のリダイレクト先URL (例: `https://example.com/newpath?q=test`)。プロトコル、ホスト、ポート、パス、クエリを含めることができます。                                                                       | Yes (`redirect` アクションの場合) |
| `FIXEDRESPONSESTATUSCODE`| アクションが `fixed-response` または `redirect` の場合のHTTPステータスコード (例: `200`, `302`, `404`)。                                                                                                                      | Yes (`fixed-response` または `redirect` アクションの場合) |
| `FIXEDRESPONSEMESSAGEBODY`| アクションが `fixed-response` の場合の応答ボディの内容。                                                                                                                                                                          | No (`fixed-response` アクションの場合) |
| `FIXEDRESPONSETYPE`    | アクションが `fixed-response` の場合の応答ボディのContent-Type (例: `text/plain`, `application/json`)。                                                                                                                             | No (`fixed-response` アクションの場合) |
| `TAGS`                 | このリスナーリソースに付与するタグ。`Key=Value`形式でセミコロン `;` 区切りで複数指定します (例: `Environment=dev;Project=WebApp`)。                                                                                                 | No        |
| `RULE_JSON_PATH`       | ロードバランサータイプが `ALB` の場合、デフォルトアクション以外の追加リスナールールを定義したJSONファイルへのパス。このJSONファイルは、複数のルールオブジェクトを含むJSON配列である必要があります（例: `./rules/http-rule1.json`）。 | No (ALBのみ) |                                                                                                 | No       |
