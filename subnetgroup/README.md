# AWS サブネットグループ作成スクリプト

このスクリプトは、指定されたCSVファイルに基づき、AWS RDS または ElastiCache のサブネットグループを作成します。

## 概要

サービスタイプ (RDS または ElastiCache) とサブネットグループの定義が記述されたCSVファイルを指定して実行することで、複数のAWSリージョンにわたるサブネットグループの作成を自動化します。

## 使用方法

```
# RDS
./create_subnet_groups.sh rds rds_subnet_groups.csv

# ElastiCache
./create_subnet_groups.sh elasticache elasticache_subnet_groups.csv

```

## CSV  

| 列名          | 説明                                                                                             | 必須/任意 | 備考                                                                                                |
| ------------- | ------------------------------------------------------------------------------------------------ | --------- | --------------------------------------------------------------------------------------------------- |
| `REGION`      | サブネットグループを作成するAWSリージョンを指定します。                                                | 必須      | 例: `ap-northeast-1`, `us-east-1`                                                                   |
| `NAME`        | 作成するサブネットグループの名前を指定します。                                                         | 必須      |                                                                                                     |
| `SUBNETS`     | サブネットグループに関連付けるサブネットを指定します。複数のサブネットを指定する場合はセミコロン (`;`) で区切ります。 | 必須      | **サブネットID** (例: `subnet-xxxxxxxxxxxxxxxxx`) または **タグ `Name` の値** (例: `my-private-subnet`) のどちらでも指定可能です。スクリプトが自動的にIDに変換します。 |
| `DESCRIPTION` | サブネットグループの説明を指定します。                                                              | 必須      |                                                                                                     |

| 列名        | 説明                                                                                                                                       | 必須/任意 | 補足                                                                                                                                                                                                                                                           |
| :---------- | :----------------------------------------------------------------------------------------------------------------------------------------- | :-------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `REGION`    | サブネットグループを作成するAWSリージョンを指定します。                                                                                    | 必須      | スクリプトはサブネットの検索およびサブネットグループの作成コマンドでこのリージョンを使用します。                                                                                                       |
| `NAME`      | 作成するキャッシュサブネットグループの名前です。                                                                                                   | 必須      | スクリプトは `create-cache-subnet-group` コマンドの `--cache-subnet-group-name` として使用します。                                                                                                  |
| `SUBNETS`   | サブネットグループに含める1つ以上のサブネットを指定します。複数のサブネットを指定する場合は、セミコロン `;` で区切ってください。各サブネットはサブネットIDまたはサブネットのNameタグの値で指定できます。 | 必須      | スクリプトはセミコロンで分割し、各項目をサブネットID (`subnet-...`) またはサブネットのNameタグとしてリージョン内で検索します。見つかったサブネットIDを収集し、コマンドの `--subnet-ids` として使用します。リスト内に有効なサブネットが一つも見つからない場合は、その行の処理はスキップされます。 |
| `DESCRIPTION` | キャッシュサブネットグループの説明です。                                                                                                   | 必須      | スクリプトはコマンドの `subnet-group-description` として使用されます。      
